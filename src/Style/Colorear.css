.pagina-colorear {
    position: relative;
    min-height: calc(100vh - 150px);
    background-color: #ffffff; 
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
    overflow: hidden;
    z-index: 1; 
}

.pagina-colorear::before {
    content: "";
    background-image: url('../assets/fondo-salpicaduras.png');
    opacity: 0.20;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-repeat: repeat;
    background-size: 350px;
    pointer-events: none;
    z-index: -1; 
}

/* Elementos protegidos */
.titulo-pagina,
.tarjeta-paleta,
.contenedor-espacio-trabajo,
.controles-lienzo-inferior,
.contenedor-biblioteca,
.pantalla-bienvenida {
    position: relative;
    z-index: 10; 
}

.titulo-pagina {
    color : orangered; 
    margin-bottom: 1rem;
    text-shadow: 1px 1px 0px white;
    font-size: 2rem;
    font-weight: bold;
}

/* --- PALETA DE HERRAMIENTAS --- */
.tarjeta-paleta {
    background: white;
    padding: 10px 20px;
    border-radius: 50px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.05);
    margin-bottom: 20px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    align-items: center;
    border: 1px solid #eee; 
}

.fila-herramientas, .fila-tamanos {
    display: flex; gap: 10px; align-items: center; flex-wrap: wrap; justify-content: center;
}
.divisor { width: 1px; height: 25px; background: #ddd; }

.circulo-color {
    width: 32px; height: 32px; border-radius: 50%; border: 2px solid white;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2); cursor: pointer; transition: transform 0.2s;
}
.circulo-color.activo { transform: scale(1.2); border-color: #333; }
.circulo-color:hover { transform: scale(1.1); }

.boton-goma {
    background: #eee; border: none; padding: 5px 15px; border-radius: 20px; cursor: pointer;
    font-family: inherit; font-size: 1rem; color: #333;
}
.boton-goma.activo { background: #333; color: white; }

.boton-tamano-pincel {
    background: #333; border-radius: 50%; border: none; opacity: 0.3; cursor: pointer;
    padding: 0; margin: 0;
}
.boton-tamano-pincel.activo { opacity: 1; border: 2px solid #007bff; }

/* --- PICKER DE COLOR --- */
.contenedor-picker {
    position: relative; width: 32px; height: 32px; border-radius: 50%;
    border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.2); overflow: hidden;
    cursor: pointer; transition: transform 0.2s;
    background: conic-gradient(red, yellow, lime, aqua, blue, magenta, red);
    display: flex; align-items: center; justify-content: center;
}
.contenedor-picker:hover { transform: scale(1.1); }
.contenedor-picker.activo { transform: scale(1.2); border-color: #333; box-shadow: 0 4px 8px rgba(0,0,0,0.3); }
.input-color-oculto {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    opacity: 0; cursor: pointer; padding: 0; margin: 0; border: none;
}
.icono-mas {
    font-weight: bold; color: white; font-size: 1.2rem;
    text-shadow: 0 1px 2px rgba(0,0,0,0.5); pointer-events: none;
}

/* --- AREA DE TRABAJO Y LIENZO --- */
.contenedor-espacio-trabajo {
    display: flex; gap: 20px; align-items: flex-start; justify-content: center; flex-wrap: wrap;
    width: 100%;
}
.area-lienzo {
    position: relative; display: flex; flex-direction: column; align-items: center;
}
.alerta-sticker {
    background: #fff3cd; color: #856404; padding: 5px 15px; border-radius: 10px;
    margin-bottom: 5px; font-weight: bold;
}

.contenedor-lienzo {
    width: 340px; height: 400px; margin: 0 auto;
    background-color: white;
    border: 4px solid #333; border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    overflow: hidden; 
    position: relative;
    z-index: 20; 
}

@media (min-width: 768px) {
    .contenedor-lienzo { width: 800px; height: 500px; }
}

.capa-lienzo {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%; touch-action: none;
}
.capa-dibujo { z-index: 1; cursor: crosshair; }
.capa-plantilla { z-index: 2; pointer-events: none; }

/* --- BARRA FLOTANTE (DESHACER/REHACER) - CORREGIDO --- */
.barra-flotante {
    position: absolute;
    top: 20px;
    left: -60px;
    display: flex; flex-direction: column; gap: 10px;
    
    /* === CAMBIO CLAVE: Z-INDEX ALTO PARA QUE NO SE ESCONDA === */
    z-index: 50; 
}

.boton-flotante {
    width: 45px; height: 45px; border-radius: 50%; border: none;
    background: white; color: #333; font-size: 1.2rem;
    box-shadow: 0 4px 10px rgba(0,0,0,0.15); cursor: pointer;
    transition: all 0.2s ease; display: flex; align-items: center; justify-content: center;
}
.boton-flotante:hover { transform: scale(1.1); background: #f0f0f0; color: #007bff; }
.boton-deshacer { background: #ffd32a; color: #333; }

/* --- CONTROLES INFERIORES --- */
.controles-lienzo-inferior {
    margin-top: 15px; width: 100%; max-width: 800px;
}
.controles-guardar {
    display: flex; gap: 10px; background: white; padding: 10px; border-radius: 30px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.05); flex-wrap: wrap; justify-content: center;
    border: 1px solid #eee;
}
.input-nombre-archivo {
    border: 1px solid #ccc; padding: 8px 15px; border-radius: 20px; outline: none;
    flex-grow: 1; min-width: 150px;
}
.boton-accion {
    border: none; padding: 8px 20px; border-radius: 20px;
    color: white; font-weight: bold; cursor: pointer;
    font-family: inherit;
}
.boton-guardar { background: #28a745; }
.boton-guardar:hover { background: #218838; }
.boton-borrar { background: #dc3545; }
.boton-borrar:hover { background: #c82333; }

/* --- BARRA LATERAL DE STICKERS --- */
.barra-lateral-stickers {
    background: white; padding: 15px; border-radius: 20px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.05);
    max-height: 500px; overflow-y: auto; text-align: center; width: 80px;
    border: 1px solid #eee;
}
.barra-lateral-stickers h3 { font-size: 1rem; margin-bottom: 10px; color: #555; }
.lista-stickers { display: flex; flex-direction: column; gap: 10px; }
.boton-sticker {
    font-size: 2rem; background: none; border: 2px solid transparent;
    border-radius: 10px; cursor: pointer; transition: transform 0.2s;
}
.boton-sticker:hover { transform: scale(1.2); }
.boton-sticker.activo { background: #e2e6ea; border-color: #007bff; }

/* --- PANTALLA DE BIENVENIDA (RESPONSIVA) --- */
.pantalla-bienvenida {
    width: 90%;
    max-width: 800px;
    height: auto;
    min-height: 400px; 
    background-color: white;
    border-radius: 20px;
    border: 4px solid #FFD700;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 30px 20px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    margin: 20px auto;
    animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.titulo-bienvenida {
    font-size: 2.5rem;
    margin-bottom: 10px;
    background: -webkit-linear-gradient(#FF0000, #FF9900);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    line-height: 1.2;
    word-wrap: break-word;
}

.texto-bienvenida {
    font-size: 1.2rem; 
    color: #666; 
    margin-bottom: 30px; 
    max-width: 90%;
}

.opciones-bienvenida {
    display: flex; 
    gap: 20px; 
    flex-wrap: wrap; 
    justify-content: center;
    width: 100%;
}

.boton-inicio {
    background: #f0f2f5;
    border: 2px solid #ccc;
    border-radius: 15px;
    padding: 15px 25px;
    cursor: pointer;
    transition: all 0.2s;
    display: flex; 
    flex-direction: column; 
    align-items: center;
    min-width: 140px;
    flex: 1;
    max-width: 200px;
}

.boton-inicio:hover {
    transform: scale(1.05); 
    border-color: #007bff; 
    background-color: #eef7ff;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

.icono-grande { font-size: 3rem; margin-bottom: 10px; }
.texto-boton { font-weight: bold; color: #333; font-size: 1.1rem; }

/* --- BIBLIOTECA Y CATEGOR√çAS --- */
.contenedor-biblioteca { width: 100%; max-width: 900px; margin-top: 40px; padding-bottom: 50px; }

.opcion-lienzo-blanco {
    background: white; border: 3px dashed #ccc; border-radius: 20px;
    padding: 20px; text-align: center; cursor: pointer; margin-bottom: 40px;
    display: flex; flex-direction: column; align-items: center; transition: all 0.3s ease;
}
.opcion-lienzo-blanco:hover { border-color: #007bff; background-color: #eef7ff; transform: scale(1.02); }
.icono-blanco { font-size: 3rem; margin-bottom: 10px; }
.opcion-lienzo-blanco h3 { margin: 0; color: #333; }

.seccion-categoria { margin-bottom: 40px; animation: fadeIn 0.5s ease-in; }

.titulo-categoria {
    font-size: 1.8rem;
    color: #ffffff;
    background-color: #ff9c0791;
    padding: 10px 25px;
    border-radius: 50px;
    display: inline-block;
    margin-bottom: 20px;
    box-shadow: 0 4px 10px rgb(255, 158, 67); 
    border-left: none;
    position: relative;
    z-index: 10;
}

.fila-dibujos { 
    display: flex; 
    flex-wrap: wrap; 
    gap: 20px; 
    justify-content: center; 
}

@media (min-width: 768px) { .fila-dibujos { justify-content: flex-start; } }

.tarjeta-dibujo {
    background: #ffffff;
    border: 2px solid #FFE082;
    border-radius: 20px;
    padding: 10px;
    width: 140px; 
    height: 170px; 
    cursor: pointer;
    box-shadow: 0 5px 15px rgba(0,0,0,0.05);
    transition: all 0.3s;
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    justify-content: space-between;
    position: relative;
    z-index: 10;
    overflow: hidden;
}

.tarjeta-dibujo:hover { 
    background: #ffffff;
    transform: translateY(-10px) scale(1.05); 
    box-shadow: 0 15px 30px rgba(0,0,0,0.15); 
    border-color: #FF9F43;
}

.tarjeta-dibujo img { 
    width: 100%; 
    height: auto; 
    max-height: 120px; 
    object-fit: contain; 
    filter: grayscale(100%); 
    transition: filter 0.3s; 
    margin-bottom: 5px;
}

.tarjeta-dibujo:hover img { filter: grayscale(0%); }

.tarjeta-dibujo span { 
    font-weight: bold; 
    color: #5d4037;
    font-size: 0.85rem; 
    text-align: center; 
    line-height: 1.1;
    width: 100%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* --- MODALES --- */
.modal-fondo {
    position: fixed; top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0, 0, 0, 0.5); display: flex;
    justify-content: center; align-items: center; z-index: 1000; animation: fadeIn 0.3s;
}
.modal-contenido {
    background: white; padding: 30px; border-radius: 25px; text-align: center;
    width: 90%; max-width: 400px; box-shadow: 0 20px 50px rgba(0,0,0,0.3);
    animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
.modal-contenido h3 { font-size: 1.5rem; color: #333; margin-bottom: 10px; }
.modal-botones { display: flex; gap: 15px; justify-content: center; }
.boton-modal {
    padding: 10px 25px; border: none; border-radius: 50px; font-size: 1.1rem;
    cursor: pointer; font-weight: bold; transition: transform 0.2s;
}
.boton-modal:hover { transform: scale(1.05); }
.boton-confirmar { background: #ff4757; color: white; }
.boton-cancelar { background: #dfe4ea; color: #333; }


@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }

@media (max-width: 950px) {
    .barra-flotante { 
        left: 10px; 
        top: 10px; 
        background: rgba(255,255,255,0.9); 
        padding: 5px; 
        border-radius: 30px; 
        z-index: 50; 
    }
    .boton-flotante { width: 35px; height: 35px; font-size: 1rem; }
}

@media (max-width: 768px) {
    .contenedor-espacio-trabajo { flex-direction: column; align-items: center; }
    .barra-lateral-stickers { width: 100%; max-width: 340px; }
    .lista-stickers { flex-direction: row; overflow-x: auto; padding-bottom: 5px; }
}

@media (max-width: 480px) {
    .pagina-colorear { padding: 10px; }
    .titulo-pagina { font-size: 1.8rem; }
    .input-nombre-archivo { min-width: unset; }

    .pantalla-bienvenida {
        width: 95%;
        padding: 20px 10px;
        min-height: auto;
    }

    .titulo-bienvenida { font-size: 1.8rem; }
    .texto-bienvenida { font-size: 1rem; margin-bottom: 20px; }

    .opciones-bienvenida { flex-direction: column; align-items: center; }

    .boton-inicio {
        width: 100%;
        max-width: 100%;
        flex-direction: row; 
        justify-content: center;
        gap: 15px;
        padding: 10px;
    }

    .icono-grande { font-size: 2rem; margin-bottom: 0; }
}